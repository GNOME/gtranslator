dnl -------------------------------------------------------------------
dnl Process this file with autoconf to produce a configure script .
dnl -------------------------------------------------------------------

AC_INIT(README)
AM_INIT_AUTOMAKE(gtranslator, 0.18)
AM_CONFIG_HEADER(config.h)
AM_MAINTAINER_MODE

dnl -------------------------------------------------------------------
dnl Pick up the Gnome macros .
dnl -------------------------------------------------------------------
AM_ACLOCAL_INCLUDE(macros)

GNOME_INIT
AC_ISC_POSIX
AC_PROG_CC
AM_PROG_CC_STDC
AC_HEADER_STDC
AC_CHECK_FUNCS(usleep)
GNOME_X_CHECKS

dnl -------------------------------------------------------------------
dnl Check for glib and gtk+ indepententally from the GNOME checks 
dnl -------------------------------------------------------------------
AM_PATH_GLIB(1.2.3)
AM_PATH_GTK(1.2.3)

dnl -------------------------------------------------------------------
dnl Add the languages which the application supports here
dnl -------------------------------------------------------------------
ALL_LINGUAS="da de no ru sv tr uk"
AM_GNOME_GETTEXT

dnl -------------------------------------------------------------------
dnl Set PACKAGE_LOCALE_DIR in config.h .
dnl -------------------------------------------------------------------
if test "x${prefix}" = "xNONE"; then
  AC_DEFINE_UNQUOTED(PACKAGE_LOCALE_DIR, "${ac_default_prefix}/${DATADIRNAME}/locale")
else
  AC_DEFINE_UNQUOTED(PACKAGE_LOCALE_DIR, "${prefix}/${DATADIRNAME}/locale")
fi

dnl -------------------------------------------------------------------
dnl Subst PACKAGE_PIXMAPS_DIR .
dnl -------------------------------------------------------------------
PACKAGE_PIXMAPS_DIR="`gnome-config --datadir`/pixmaps/${PACKAGE}"
AC_SUBST(PACKAGE_PIXMAPS_DIR)

dnl -------------------------------------------------------------------
dnl Simply substitute the icon-location directory
dnl in gtranslator.keys.in .
dnl -------------------------------------------------------------------
PIXMAP_DIR="`gnome-config --datadir`/pixmaps/mc"
AC_SUBST(PIXMAP_DIR)

dnl -------------------------------------------------------------------
dnl Whether to bind the po-files with gtranslator/bind the mime-type ?
dnl -------------------------------------------------------------------
AC_ARG_ENABLE(mime-bind,
	[  --enable-mime-bind=[yes/no]      Bind the po-files mime-type to gtranslator],,enable_mime_bind=yes)
AC_MSG_CHECKING([if to bind the po-files with gtranslator ])
if test "x$enable_mime_bind" = "xyes" ; then
	AC_DEFINE(BIND_MIME)
	AC_MSG_RESULT(["Ok,"
"********** Will install the mime and keys files."])
else
	AC_MSG_RESULT(["Ok, "
"********** Not installing the mime and keys files for the mime-types."])
fi
AM_CONDITIONAL(BIND_MIME,test x$enable_mime_bind = xyes)

dnl -------------------------------------------------------------------
dnl For Karl and the other (X)EMacs lovers ... [ _I_ love VIm ... ] 
dnl -------------------------------------------------------------------
AC_ARG_ENABLE(emacs-lover,
        [  --enable-emacs-lover=[no/yes]    Compile with a more Emacs friendly about-message],,enable_emacs_lover=no)
AC_MSG_CHECKING([if you're a (X)Emacs lover ])            
if test "x$enable_emacs_lover" = "xyes" ; then
	AC_DEFINE(EMACS_LOVER)
        AC_MSG_RESULT(["Ha!"
"You are an _X_Emacs lover! I will convince you to use gtranslator later on .."])
else
        AC_MSG_RESULT(["Well done!"
"You get the original about message ... "])
fi

dnl -------------------------------------------------------------------
dnl The standard extended GNOME compile warning options ...
dnl -------------------------------------------------------------------
GNOME_COMPILE_WARNINGS


AC_OUTPUT([
Makefile
data/Makefile
data/gtranslator.keys
macros/Makefile
help/Makefile
help/C/Makefile
help/tr/Makefile
src/Makefile
intl/Makefile
po/Makefile.in
])
